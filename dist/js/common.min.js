function preloader(){function t(t){t.style.opacity=1;var n=setInterval(function(){t.style.opacity=t.style.opacity-.05,t.style.opacity<=.05&&(clearInterval(n),i.style.display="none")},30)}var i=document.getElementById("hellopreloader_preload");setTimeout(function(){t(i),animTitle(".header_wrap h1","fadeInLeft",50)},2e3)}function animTitle(t,i,n){var o=$(t),e=o.html(),a=$.trim(e).split(""),s=a.length,r=0;o.text("");var l=setInterval(function(){if(r<s){var t='<span class="animated '+i+'">'+a[r]+"</span>";o.append(t),r++}else r=s,clearInterval(l)},n)}var main={opt:{img:$("img"),linc:$("a"),searchButton:$(".search-button"),fixedMenu:$(".fixed_menu"),header:$("header.inner"),kino:$(".kino"),popup:$(".btn.pop"),togBut:$(".toggle_but"),lampWrap:$(".lamp_wrap"),rotateBlock:$(".img_wrap"),scrolIdItem:$("header .hidden-block ul li"),svgCircl:$(".circle-path"),rotateBlock:$(".title_block"),changeBg:$(".front_side"),deviceBut:$(".port_wrap span"),ajaxButton:$(".ajax-btn"),polyLength:$("#skill").find("polygon, path"),flag:1,documentM:$("body"),elements:$("section"),packeryOptions:{itemSelector:".blog-grid",gutter:10},elementsPort:$(".wrap_prew"),dataCount:$(".procent"),height:[],position:[],startAnim:[],stopAnim:[],portfolio:[],startAnimPort:[]},documentHeight:function(){return this.opt.documentM.height()},windowHeight:function(){return window.innerHeight},windowWidth:function(){return window.innerWidth},randPos:function(t,i){return Math.floor(Math.random()*(i-t+1))+t},dragstart:function(t){$(t).on("dragstart",function(t){t.preventDefault()})},scrEl:function(t,i,n){$(t).animate({scrollTop:i},n)},smoofScr:function(){$(".button_down").on("click",function(){main.scrEl("body",main.windowHeight(),1200)}),$(".mouse").on("click",function(){var t=$(".site-screen img").height();$(".site-screen").animate({scrollTop:t},{duration:3e3,complete:function(){main.windowWidth()<480&&main.scrEl("body",main.windowHeight(),1200)}})})},popup:function(t){t.on("click",function(t){t.preventDefault();var i=$(this).data("show"),n=$("#"+i);n.fadeIn(600).css("height",$(window).height()+"px").find(".popup-content").removeClass("anim").append('<span class="fade_out">&#9587;</span>'),$(".fade_out").click(function(){n.fadeOut(600).find(".popup-content").addClass("anim"),$(this).detach()})})},devicePrew:function(){this.opt.deviceBut.on("click",function(){var t=$(this).parents(".wrap_prew").find(".prew"),i=$(this).attr("data-src"),n=$(this).attr("data-show");t.attr("id");main.opt.deviceBut.removeClass("active"),$(this).addClass("active"),t.attr("class","prew "+n),t.find("img").attr("src",i)})},ajaxPortfolio:function(){var t=this.opt.ajaxButton.data("start");this.opt.ajaxButton.on("click",function(){$(this).addClass("load");var i=$(this).data("ajax"),n=$(this).data("count"),o=$(this).data("parent"),e=$(this).data("tpl"),a=$(this).data("offset");$.get(i+"?offset="+t+"&parent="+o+"&limit="+a+"&tpl="+e,function(t){$(".ajax-wrap").append(t),main.opt.elementsPort=$(".wrap_prew"),main.opt.deviceBut=$(".port_wrap span"),main.devicePrew(),main.createPosition(main.opt.elements),main.createPositionPort(main.opt.elementsPort)}),t+=a,t>n?$(this).detach():$(this).removeClass("load")})},calculator:function(){var t=$(".type-title"),i=$(".level-two");main.toggleC(i),main.toggleC(t)},toggleC:function(t){t.on("click",function(){t.not(this).removeClass("active").next().slideUp("slow"),$(this).toggleClass("active").next().slideToggle("slow")})},logoAnim:function(){function t(){i=setInterval(function(){n.toggleClass("logo-anim")},4e3)}var i,n=main.opt.fixedMenu.find(".logo"),o=n.next().find("span");t.call(),o.click(function(){var o=$(this).attr("data-menu"),e=$("."+o);n.toggleClass("logo-anim"),n.hasClass("logo-anim")?clearInterval(i):t(),e.toggleClass("open_fixed").css("z-index","150"),1==e.index()?e.next().addClass("open_fixed").css("z-index","-1"):e.prev().addClass("open_fixed").css("z-index","-1")})},rotatePort:function(){var t=$("#contacts").width(),i=$("#contacts").outerHeight(),n=i/69;$("#contacts").mousemove(function(i){var o=$(this).offset(),e=i.pageX,a=i.pageY,e=e-Math.floor(t/2),a=a-o.top;$(this).find(".lamp_left .img_block").css({"-webkit-transform":"rotate("+a/n+"deg)"}),$(this).find(".lamp_right .img_block").css({"-webkit-transform":"rotate("+-a/n+"deg)"})})},toggleMnu:function(){this.opt.togBut.on("click",function(){var t=$(".hidden-block");$(this).hasClass("tog_mnu")?t.removeClass("z_menu"):setTimeout(function(){t.addClass("z_menu")},1e3),main.opt.lampWrap.toggleClass("lamp_wrap_active"),main.opt.togBut.toggleClass("tog_mnu"),$(this).parents("header").toggleClass("open_mnu"),main.opt.lampWrap.find("svg ellipse").fadeToggle(100),main.opt.header.find("nav li").slideToggle("fast"),$(".search-button").hasClass("active")&&$(".search-button").click()})},numCounter:function(){var t=this.opt.dataCount,i=0;setInterval(function(){for(var n=0;n<t.length;n++){var o=t.eq(n).data("procent");i<o+2?(main.opt.dataCount.eq(n).text(i+"%"),i+=2):main.opt.dataCount.eq(n).text(o+"%")}},100)},svgCircle:function(){main.opt.svgCircl.parents(".sli-item").hasClass("sli-active")?(this.numCounter(),main.opt.svgCircl.parents(".leng_wrap").attr("id","circl")):main.opt.svgCircl.parents(".leng_wrap").attr("id","")},smoofScroll:function(){this.opt.scrolIdItem.on("click",function(t){t.preventDefault(),main.opt.smooffScroll=$(this).index();var i=main.opt.position[main.opt.smooffScroll-1];main.opt.documentM.animate({scrollTop:i},1200)})},createPosition:function(t){this.opt.position.length&&(this.opt.position.length=0,this.opt.startAnim.length=0,this.opt.stopAnim.length=0,this.opt.height.length=0);for(var i=0;i<t.length;i++){var n=t.eq(i),o=n.offset().top,e=(n.height(),o),a=o-this.windowHeight()/2;this.opt.startAnim.push(a),this.opt.stopAnim.push(e),this.opt.height.push(t.height()),this.opt.position.push(o)}},createPositionPort:function(t){this.opt.startAnimPort.length&&(this.opt.startAnimPort.length=0);for(var i=0;i<t.length;i++){var n=t.eq(i),o=n.offset().top-this.windowHeight();this.opt.startAnimPort.push(o)}},randPosition:function(){for(var t=0;t<this.opt.polyLength.length;t++)this.opt.polyLength.eq(t).css({transition:"all 0.8s",transform:"translate("+this.randPos(-200,400)+"px,"+this.randPos(0,400)+"px)"})},defaulPos:function(){this.opt.polyLength.css({transform:"translate(0px,0px)"})},scrollBlock:function(t,i){var n=main.opt.startAnim[i]-main.opt.stopAnim[i],o=n/90,e=n/121;if(t>main.opt.startAnim[i]&&t<main.opt.stopAnim[i]){var a=t-main.opt.startAnim[i],s=Math.floor(a/o),r=255+Math.floor(a/e);this.opt.elements.eq(i).find(this.opt.rotateBlock).css({transform:"rotateX("+-s+"deg)"}),this.opt.elements.eq(i).find(this.opt.changeBg).css({backgroundColor:"rgb("+r+","+r+","+r+")"})}else t<main.opt.startAnim[i]&&this.opt.elements.eq(i).find(this.opt.rotateBlock).css({transform:"rotateX(0deg)"})},formSearch:function(){this.opt.searchButton.on("click",function(){$(this).toggleClass("active"),$(this).prev().toggleClass("active")})},init:function(){this.dragstart(this.opt.img),this.dragstart(this.opt.linc),this.toggleMnu(),this.formSearch(),mySlider.init(600,1),main.createPosition(main.opt.elements),main.createPositionPort(main.opt.elementsPort),main.rotatePort(),main.logoAnim(),main.popup(main.opt.popup),main.devicePrew(),main.smoofScr(),main.ajaxPortfolio(),window.onload=function(){main.calculator()},$(document).scroll(function(){var t=$(document).scrollTop();if(main.opt.togBut.hasClass("tog_mnu")&&main.opt.togBut.click(),!$("#portfolio, .last-portfolio ").hasClass("no-animation"))for(var i=0;i<main.opt.startAnimPort.length;i++)t+30>main.opt.startAnimPort[i]?main.opt.elementsPort.eq(i).addClass("animated fadeInLeft"):main.opt.elementsPort.eq(i).removeClass("animated fadeInLeft");for(var i=0;i<main.opt.position.length;i++)main.scrollBlock(t,i),t>main.opt.position[i]?main.opt.elements.eq(i).addClass("activeSection"):main.opt.elements.eq(i).removeClass("activeSection");var n=$("header").height();t>n?main.opt.fixedMenu.css("left","10px"):main.opt.fixedMenu.css("left","-100px")})}},mySlider={main:$("body"),Mblock:$("#sli-block"),itemWrap:$("#sli-block #sli-wrap"),item:$("#sli-block .sli-item"),count:0,pagination:[],navNext:'<span class="sli-next">&#8250</span>',navPrev:'<span class="sli-prew">&#8249</span>',winWidth:function(){return this.Mblock.parent().width()},itemWidth:function(t){t?this.item.width(Math.floor(this.winWidth()/t)):this.item.width(this.winWidth())},sliderWidth:function(){var t=this.item.length*this.winWidth();this.itemWrap.width(t)},addClass:function(){this.item.removeClass("sli-active"),this.item.eq(this.count).addClass("sli-active"),$(".sli-pagination span").removeClass("sli-active"),$(".sli-pagination span").eq(this.count).addClass("sli-active")},next:function(){this.count>this.item.length-2?this.count=0:++this.count,this.itemWrap.css({marginLeft:"-"+this.item.width()*this.count+"px"}),this.addClass(),main.svgCircle(),main.defaulPos()},prew:function(){this.count<1?this.count=0:--this.count,this.itemWrap.css({marginLeft:"-"+this.item.width()*this.count+"px"}),this.addClass(),main.svgCircle(),main.defaulPos()},paginActiv:function(t){var i=t.index();this.itemWrap.css({marginLeft:"-"+this.item.width()*i+"px"}),this.count=i},display:function(t){for(var i=0;i<this.item.length;i++)this.pagination.push("<span></span>");this.item.length>1&&this.Mblock.append(this.navNext,this.navPrev,'<div class="sli-pagination">'+this.pagination.join("")+"</div>"),this.main.on("click",".sli-next",function(){main.randPosition(),setTimeout(function(){mySlider.next()},t)}),this.main.on("click",".sli-prew",function(){main.randPosition(),setTimeout(function(){mySlider.prew()},t)}),this.main.on("click",".sli-pagination span",function(){mySlider.paginActiv($(this)),mySlider.addClass(),main.svgCircle()}),this.addClass()},init:function(t,i){var n=function(){this.sliderW=mySlider.sliderWidth(),this.itemW=mySlider.itemWidth(i),this.mainInit=mySlider.display(t)};return new n}};$(document).ready(function(){var t=$(window).width();$(".header_wrap").height(main.windowHeight());try{$.browserSelector(),$("html").hasClass("chrome")&&$.smoothScroll()}catch(t){}for(var i=$("#about .skill-block .progres span"),n=0;n<i.length;n++){var o=i.eq(n).data("progres");i.eq(n).css("width",o+"%")}localStorage.getItem("User")?$("#hellopreloader_preload").detach():localStorage.setItem("User",!0),$("#send input, #send textarea").on("focusin",function(){$(this).prev().css("marginTop","-35px")}).on("focusout",function(){return!$(this).val()&&void $(this).prev().css("marginTop","0px")}),$("#about .aside").css("min-height",$("#about .body-about").outerHeight()+"px"),$("form.send").submit(function(){var t=$(this);return $.ajax({type:"POST",url:this.action,data:t.serialize()}).done(function(){alert("Сообщение отправлено"),setTimeout(function(){t.trigger("reset")},1e3)}),!1}),t<480&&$(".fixed_menu").detach(),main.init()}),$(window).on("load",function(){$("#hellopreloader_preload").length&&preloader()});